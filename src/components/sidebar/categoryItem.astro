---
import type { CategoryTreeItem } from "@utils/content";
import ButtonLink from "@components/common/buttonLink.astro";


interface Props {
    nodes: CategoryTreeItem[];
    depth?: number;
    maxDepth?: number;
}

const { nodes, depth = 0, maxDepth = 3 } = Astro.props;
---

{nodes.map((node) => (
    <div>
        <div style={`padding-left: ${depth * 0.75}rem;`}>
            <ButtonLink
                url={node.url}
                badge={String(node.count)}
                label={`View all posts in the ${node.name.trim()} category`}
            >
                {node.name.trim()}
            </ButtonLink>
        </div>
        {node.children.length > 0 && depth < maxDepth - 1 && (
            <Astro.self nodes={node.children} depth={depth + 1} maxDepth={maxDepth} />
        )}
    </div>
))}